<?xml version="1.0" encoding="UTF-8"?>
<mod name="Treasure Hunt" version="1.0" author="YourName" contact="your.email@example.com" enabled="yes">
    <!-- Evento que inicia a caça ao tesouro -->
    <event type="think" name="treasure_hunt_start" event="script"><![CDATA[
        function onThink(interval)
            -- Verifica se a caça ao tesouro está ativa
            local isActive = getGlobalStorageValue(1234) == 1
            if not isActive then
                return true
            end

            -- Lógica para mostrar dicas ou mensagens de caça ao tesouro
            local players = getPlayersOnline()
            for _, pid in ipairs(players) do
                local player = Player(pid)
                if player then
                    doPlayerSendTextMessage(pid, MESSAGE_STATUS_CONSOLE_BLUE, "A new treasure has been hidden! Find it for rewards!")
                end
            end

            return true
        end
    ]]></event>

    <!-- Evento para o comando de início da caça ao tesouro -->
    <talkaction words="/starttreasurehunt" event="script"><![CDATA[
        function onSay(cid, words, param, channelId)
            -- Ativa a caça ao tesouro
            setGlobalStorageValue(1234, 1)
            doPlayerSendTextMessage(cid, MESSAGE_STATUS_CONSOLE_BLUE, "The treasure hunt has started! Good luck finding the treasure!")
            return true
        end
    ]]></talkaction>

    <!-- Evento para encontrar o tesouro -->
    <event type="use" name="treasure_found" event="script"><![CDATA[
        function onUse(cid, item, fromPosition, itemEx, toPosition)
            -- Checa se o item usado é o tesouro
            if item.itemid == 1234 then
                -- Marca o tesouro como encontrado
                setGlobalStorageValue(1234, 0)
                doPlayerSendTextMessage(cid, MESSAGE_STATUS_CONSOLE_BLUE, "Congratulations! You have found the treasure and won 1000 gold!")
                doPlayerAddMoney(cid, 1000)
                return true
            end
            return false
        end
    ]]></event>
</mod>
